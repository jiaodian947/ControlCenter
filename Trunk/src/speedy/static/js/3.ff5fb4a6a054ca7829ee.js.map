{"version":3,"sources":["webpack:///./src/api/mail.js","webpack:///src/views/mail/sendMail.vue","webpack:///./src/api/props.js","webpack:///./src/views/mail/sendMail.vue?82ee","webpack:///./src/views/mail/sendMail.vue"],"names":["page","pageSize","Object","__WEBPACK_IMPORTED_MODULE_0__utils_request__","url","method","params","id","maildetails","data","form","send_type","mail_roles","mail_title","mail_type","mail_subtype","mail_desc","attachments","send_reason","server_selected","props","servers","send_time","created","this","getServersList","$store","getters","name","getPropsList","methods","handleSelected","item","forEach","element","_this","request","then","response","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","Data","next","done","i","value","prop_name","err","return","username","_this2","user","addAttachment","push","key","Date","now","count","is_bind","removeAttachment","index","indexOf","splice","querySearch","queryString","cb","filter","createFilter","prop","toLowerCase","sendMail","_this3","getTime","game_id","server_id","sender","console","log","mail","Status","$notify","title","message","type","$router","path","views_mail_sendMail","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label-position","label","placeholder","callback","$$v","expression","_l","server_ip","server_name","staticStyle","float","_v","_s","color","font-size","$set","border","directives","rawName","on","click","attachment","gutter","align","width","fetch-suggestions","trigger-on-focus","select","scopedSlots","_u","fn","prop_id","icon","circle","$event","preventDefault","staticRenderFns","Component","__webpack_require__","normalizeComponent","mail_sendMail","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.ff5fb4a6a054ca7829ee.js","sourcesContent":["import request from '@/utils/request';\r\n\r\nexport function sendMailList(page, pageSize) {\r\n  return request({\r\n    url: '/api/mail/sendMailList',\r\n    method: 'get',\r\n    params: {\r\n      page,\r\n      pageSize\r\n    }\r\n  });\r\n}\r\nexport function deleteMailLog(id) {\r\n  return request({\r\n    url: '/api/mail/deleteMailLog',\r\n    method: 'get',\r\n    params: {\r\n      id\r\n    }\r\n  });\r\n}\r\nexport function sendMail(maildetails) {\r\n  return request({\r\n    url: '/api/mail/sendMail',\r\n    method: 'post',\r\n    data: {\r\n      maildetails\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/mail.js","<template>\r\n  <div class=\"app-container\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"120px\" label-position=\"left\">\r\n          <el-form-item label=\"发送的区服\">\r\n            <el-select v-model=\"server_selected\" placeholder=\"please select the server want to send\">\r\n                <el-option\r\n                    v-for=\"item in servers\"\r\n                    :key=\"item.server_ip\"\r\n                    :label=\"item.server_name\"\r\n                    :value=\"item.server_id\">\r\n                    <span style=\"float: left\">{{ item.server_name }}</span>\r\n                    <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.server_ip }}</span>\r\n                </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"发送的类型\">\r\n            <el-radio-group v-model=\"form.send_type\">\r\n                <el-radio border :label=\"1\" >全部发送</el-radio>\r\n                <el-radio border :label=\"2\" >角色名称</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色名称\" v-show=\"form.send_type===2\">\r\n            <el-input type=\"textarea\" v-model=\"form.mail_roles\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮件标题\">\r\n            <el-input v-model=\"form.mail_title\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮件类型\">\r\n            <el-select v-model=\"form.mail_type\" placeholder=\"please select mail's type \">\r\n              <!-- testData -->\r\n              <el-option label=\"系统\" value=\"1\"></el-option>\r\n              <el-option label=\"GM\" value=\"2\"></el-option>\r\n\r\n            </el-select>\r\n            <el-select v-model=\"form.mail_subtype\" placeholder=\"please select mail's type \">\r\n              <!-- testData -->\r\n              <el-option label=\"系统\" value=\"1\"></el-option>\r\n              <el-option label=\"GM\" value=\"2\"></el-option>\r\n\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮件内容\">\r\n            <el-input type=\"textarea\" v-model=\"form.mail_desc\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"增加道具\">\r\n            <el-button @click=\"addAttachment\">+</el-button>\r\n        </el-form-item>\r\n        <el-form-item \r\n            v-for=\"(attachment, index) in form.attachments\"\r\n            :label=\"'附件' + (index+1)\"\r\n            :key=\"attachment.key\"\r\n            :value=\"attachment.id\"\r\n        >\r\n            <el-row :gutter=\"20\" type=\"flex\">\r\n                <el-col>\r\n                  <div align=\"center\" class=\"sub-title\">道具名称</div>\r\n                  <el-autocomplete\r\n                    style=\"width:100%\"\r\n                    class=\"inline-input\"\r\n                    v-model=\"attachment.name\"\r\n                    :fetch-suggestions=\"querySearch\"\r\n                    placeholder=\"请输入内容\"\r\n                    :trigger-on-focus=\"true\"\r\n                    @select=\"handleSelected\"\r\n                  >\r\n                  <template slot-scope=\"{ item }\">\r\n                    <div class=\"attachment_name\">{{ item.value }}</div>\r\n                    <span class=\"attachment_id\" >id:{{ item.prop_id }}</span>\r\n                  </template>\r\n                  </el-autocomplete>\r\n                </el-col>\r\n                <el-col ><div align=\"center\" class=\"sub-title\">道具数量</div><el-input v-model=\"attachment.count\"></el-input></el-col>\r\n                <el-col ><br><el-checkbox v-model=\"attachment.is_bind\">是否绑定</el-checkbox></el-col>\r\n                <el-col ><br><el-button type=\"danger\" icon=\"el-icon-delete\" @click.prevent=\"removeAttachment(attachment)\" circle></el-button></el-col>\r\n            </el-row>\r\n            \r\n        </el-form-item>\r\n        <el-form-item label=\"发送原因\">\r\n            <el-input type=\"textarea\" v-model=\"form.send_reason\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"sendMail\">发送邮件</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { serversPower } from '@/api/user';\r\nimport { propsList } from '@/api/props';\r\nimport { sendMail } from '@/api/mail';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        send_type: 1,\r\n        mail_roles: '',\r\n        mail_title: '',\r\n        mail_type: '',\r\n        mail_subtype: '',\r\n        mail_desc: '',\r\n        attachments: [],\r\n        send_reason: ''\r\n      },\r\n      server_selected: '',\r\n      props: [],\r\n      servers: [],\r\n      send_time: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.getServersList(this.$store.getters.name);\r\n    this.getPropsList();\r\n  },\r\n\r\n  methods: {\r\n    handleSelected(item) {\r\n      this.form.attachments.forEach(element => {\r\n        if (element['name'] === item['value']) {\r\n          element['id'] = item['prop_id'];\r\n        }\r\n      });\r\n    },\r\n    getPropsList() {\r\n      propsList().then(response => {\r\n        for (const i of response.Data.props) {\r\n          i.value = i.prop_name; // 将prop_name作为value\r\n        }\r\n        this.props = response.Data.props;\r\n      });\r\n    },\r\n    getServersList(username) {\r\n      serversPower(username).then(response => {\r\n        this.servers = response.Data.servers;\r\n      });\r\n    },\r\n    addAttachment() {\r\n      this.form.attachments.push({\r\n        // test data\r\n        key: Date.now(),\r\n        id: '',\r\n        name: '',\r\n        count: '',\r\n        is_bind: true\r\n      });\r\n    },\r\n    removeAttachment(item) {\r\n      var index = this.form.attachments.indexOf(item);\r\n      if (index !== -1) {\r\n        this.form.attachments.splice(index, 1);\r\n      }\r\n    },\r\n    querySearch(queryString, cb) {\r\n      var props = this.props;\r\n\r\n      var results = queryString\r\n        ? props.filter(this.createFilter(queryString))\r\n        : props;\r\n\r\n      // 调用 callback 返回建议列表的数据\r\n      cb(results);\r\n    },\r\n    createFilter(queryString) {\r\n      return prop => {\r\n        return (\r\n          prop.prop_name.toLowerCase().indexOf(queryString.toLowerCase()) === 0\r\n        );\r\n      };\r\n    },\r\n    sendMail() {\r\n      this.send_time = new Date().getTime();\r\n      var data = {\r\n        game_id: 1,\r\n        server_id: this.server_selected,\r\n        send_time: this.send_time,\r\n        sender: this.$store.getters.name,\r\n        data: this.form\r\n      };\r\n      console.log(data);\r\n\r\n      sendMail(data).then(response => {\r\n        console.log(response);\r\n        if (response.Status === 200) {\r\n          this.$notify({\r\n            title: '发送成功',\r\n            message: '邮件发送成功',\r\n            type: 'success'\r\n          });\r\n          this.$router.push({ path: '/mail/list' });\r\n        } else {\r\n          console.log(response);\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.attachment_name {\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\n.attachment_id {\r\n  font-size: 12px;\r\n  color: #b4b4b4;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/mail/sendMail.vue","import request from '@/utils/request';\r\n\r\nexport function propsList(params) {\r\n  return request({\r\n    url: '/api/props/getPropsList',\r\n    method: 'get',\r\n    params\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/props.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"120px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"发送的区服\"}},[_c('el-select',{attrs:{\"placeholder\":\"please select the server want to send\"},model:{value:(_vm.server_selected),callback:function ($$v) {_vm.server_selected=$$v},expression:\"server_selected\"}},_vm._l((_vm.servers),function(item){return _c('el-option',{key:item.server_ip,attrs:{\"label\":item.server_name,\"value\":item.server_id}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.server_name))]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.server_ip))])])}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送的类型\"}},[_c('el-radio-group',{model:{value:(_vm.form.send_type),callback:function ($$v) {_vm.$set(_vm.form, \"send_type\", $$v)},expression:\"form.send_type\"}},[_c('el-radio',{attrs:{\"border\":\"\",\"label\":1}},[_vm._v(\"全部发送\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"border\":\"\",\"label\":2}},[_vm._v(\"角色名称\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form.send_type===2),expression:\"form.send_type===2\"}],attrs:{\"label\":\"角色名称\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.mail_roles),callback:function ($$v) {_vm.$set(_vm.form, \"mail_roles\", $$v)},expression:\"form.mail_roles\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮件标题\"}},[_c('el-input',{model:{value:(_vm.form.mail_title),callback:function ($$v) {_vm.$set(_vm.form, \"mail_title\", $$v)},expression:\"form.mail_title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮件类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"please select mail's type \"},model:{value:(_vm.form.mail_type),callback:function ($$v) {_vm.$set(_vm.form, \"mail_type\", $$v)},expression:\"form.mail_type\"}},[_c('el-option',{attrs:{\"label\":\"系统\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"GM\",\"value\":\"2\"}})],1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"please select mail's type \"},model:{value:(_vm.form.mail_subtype),callback:function ($$v) {_vm.$set(_vm.form, \"mail_subtype\", $$v)},expression:\"form.mail_subtype\"}},[_c('el-option',{attrs:{\"label\":\"系统\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"GM\",\"value\":\"2\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮件内容\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.mail_desc),callback:function ($$v) {_vm.$set(_vm.form, \"mail_desc\", $$v)},expression:\"form.mail_desc\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"增加道具\"}},[_c('el-button',{on:{\"click\":_vm.addAttachment}},[_vm._v(\"+\")])],1),_vm._v(\" \"),_vm._l((_vm.form.attachments),function(attachment,index){return _c('el-form-item',{key:attachment.key,attrs:{\"label\":'附件' + (index+1),\"value\":attachment.id}},[_c('el-row',{attrs:{\"gutter\":20,\"type\":\"flex\"}},[_c('el-col',[_c('div',{staticClass:\"sub-title\",attrs:{\"align\":\"center\"}},[_vm._v(\"道具名称\")]),_vm._v(\" \"),_c('el-autocomplete',{staticClass:\"inline-input\",staticStyle:{\"width\":\"100%\"},attrs:{\"fetch-suggestions\":_vm.querySearch,\"placeholder\":\"请输入内容\",\"trigger-on-focus\":true},on:{\"select\":_vm.handleSelected},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"attachment_name\"},[_vm._v(_vm._s(item.value))]),_vm._v(\" \"),_c('span',{staticClass:\"attachment_id\"},[_vm._v(\"id:\"+_vm._s(item.prop_id))])]}}]),model:{value:(attachment.name),callback:function ($$v) {_vm.$set(attachment, \"name\", $$v)},expression:\"attachment.name\"}})],1),_vm._v(\" \"),_c('el-col',[_c('div',{staticClass:\"sub-title\",attrs:{\"align\":\"center\"}},[_vm._v(\"道具数量\")]),_c('el-input',{model:{value:(attachment.count),callback:function ($$v) {_vm.$set(attachment, \"count\", $$v)},expression:\"attachment.count\"}})],1),_vm._v(\" \"),_c('el-col',[_c('br'),_c('el-checkbox',{model:{value:(attachment.is_bind),callback:function ($$v) {_vm.$set(attachment, \"is_bind\", $$v)},expression:\"attachment.is_bind\"}},[_vm._v(\"是否绑定\")])],1),_vm._v(\" \"),_c('el-col',[_c('br'),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){$event.preventDefault();_vm.removeAttachment(attachment)}}})],1)],1)],1)}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发送原因\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.send_reason),callback:function ($$v) {_vm.$set(_vm.form, \"send_reason\", $$v)},expression:\"form.send_reason\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sendMail}},[_vm._v(\"发送邮件\")])],1)],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c61eef8c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/mail/sendMail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c61eef8c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sendMail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sendMail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sendMail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c61eef8c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./sendMail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/mail/sendMail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}