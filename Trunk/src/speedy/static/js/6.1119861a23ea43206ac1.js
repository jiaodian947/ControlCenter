webpackJsonp([6],{WIA2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("BO1k"),i=r.n(n),s=r("vMJZ"),a=r("vLgD");var o={created:function(){this.username=this.$route.query.username,this.getUserServer(this.$route.query.username),this.getServerList(),this.getUserView(this.$route.query.username),this.getViewList()},methods:{handleServersChange:function(e,t,r){var n=this,i={username:this.username};"left"===t&&(i.action="delete",i.server_power=r),"right"===t&&(i.action="add",i.server_power=r),Object(s.b)(i).then(function(e){console.log(e),200===e.Status&&n.$notify({title:"操作成功",message:"操作成功",type:"success"})}).catch(function(e){console.log(e)})},handleViewsChange:function(e,t,r){var n=this,i={username:this.username};"left"===t&&(i.action="delete",i.view_power=r),"right"===t&&(i.action="add",i.view_power=r),console.log(i),Object(s.c)(i).then(function(e){console.log(e),200===e.Status&&n.$notify({title:"操作成功",message:"操作成功",type:"success"})}).catch(function(e){console.log(e)})},getServerList:function(){var e=this;Object(a.a)({url:"/api/server/serverList",method:"get"}).then(function(t){e.serverList=t.Data.servers}).catch(function(e){console.log(e)})},getViewList:function(){var e=this;Object(a.a)({url:"/api/view/viewList",method:"get"}).then(function(t){e.viewList=t.Data.views}).catch(function(e){console.log(e)})},getUserServer:function(e){var t=this;Object(s.d)(e).then(function(e){var r=!0,n=!1,s=void 0;try{for(var a,o=i()(e.Data.servers);!(r=(a=o.next()).done);r=!0){var c=a.value;t.serverPower.push(parseInt(c.server_id))}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}}).catch(function(e){console.log(e)})},getUserView:function(e){var t=this;Object(s.e)(e).then(function(e){var r=!0,n=!1,s=void 0;try{for(var a,o=i()(e.Data.views);!(r=(a=o.next()).done);r=!0){var c=a.value;t.viewPower.push(parseInt(c.view_id))}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}}).catch(function(e){console.log(e)})}},data:function(){return{username:"",serverPower:[],serverList:[],viewList:[],viewPower:[]}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("p",[e._v("服务器权限")]),e._v(" "),r("hr"),e._v(" "),r("div",[r("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"",titles:["服务器列表","可操作服务器"],props:{key:"server_id",label:"server_name"},data:e.serverList},on:{change:e.handleServersChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.option;return r("span",{},[e._v(e._s(n.server_id)+" - "+e._s(n.server_name))])}}]),model:{value:e.serverPower,callback:function(t){e.serverPower=t},expression:"serverPower"}})],1),e._v(" "),r("p",[e._v("页面权限")]),e._v(" "),r("hr"),e._v(" "),r("div",[r("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"",titles:["页面列表","可访问的页面"],props:{key:"view_id",label:"title"},data:e.viewList},on:{change:e.handleViewsChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.option;return r("span",{},[e._v(e._s(n.view_id)+" - "+e._s(n.title))])}}]),model:{value:e.viewPower,callback:function(t){e.viewPower=t},expression:"viewPower"}})],1)])},staticRenderFns:[]};var l=r("VU/8")(o,c,!1,function(e){r("e17o")},null,null);t.default=l.exports},e17o:function(e,t){}});
//# sourceMappingURL=6.1119861a23ea43206ac1.js.map