{"version":3,"sources":["webpack:///src/views/activity/switch.vue","webpack:///./src/api/activity.js","webpack:///./src/views/activity/switch.vue?5d13","webpack:///./src/views/activity/switch.vue"],"names":["activity_switch","data","currentPage","pageSize","totalCount","tableData","server_selected","servers","methods","changeServer","value","this","getSwitchList","getServersList","username","_this","Object","user","then","response","Data","formatter","row","column","address","handleSubmit","index","switchDetails","_this2","change_time","Date","getTime","game_id","server_id","request","url","method","Status","$notify","title","message","type","$router","push","path","console","log","filterSendType","handleSizeChange","page_size","handleCurrentChange","page","_this3","params","switchList","forEach","element","parseInt","count","created","$store","getters","name","views_activity_switch","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","on","change","model","callback","$$v","expression","_l","item","key","label","server_name","staticStyle","float","_v","_s","color","font-size","server_ip","width","stripe","default-sort","prop","order","sortable","scopedSlots","_u","fn","scope","active-color","inactive-color","$set","size","click","$event","$index","margin-top","background","layout","page-sizes","page-size","total","current-change","size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/16.6135ccf24db51b9703a6.js","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-select v-model=\"server_selected\" @change=\"changeServer\" placeholder=\"选择服务器\">\r\n        <el-option\r\n            v-for=\"item in servers\"\r\n            :key=\"item.server_id\"\r\n            :label=\"item.server_name\"\r\n            :value=\"item.server_id\">\r\n            <span style=\"float: left\">{{ item.server_name }}</span>\r\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.server_ip }}</span>\r\n        </el-option>\r\n    </el-select>\r\n    <el-table\r\n        stripe\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\"\r\n        :default-sort = \"{prop: 'send_time', order: 'descending'}\"\r\n        >\r\n        <el-table-column\r\n        prop=\"s_id\"\r\n        label=\"功能ID\"\r\n        sortable\r\n       >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"s_name\"\r\n        label=\"功能名称\"\r\n        sortable\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"n_status\"\r\n        label=\"状态\"\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.n_status\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\">\r\n            </el-switch>\r\n          </template>\r\n          \r\n        </el-table-column>\r\n        <el-table-column \r\n         label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              @click=\"handleSubmit(scope.$index, scope.row)\">提交</el-button>\r\n          </template>\r\n        </el-table-column>\r\n    </el-table>\r\n    <div style=\"float:right;margin-top:20px;\">\r\n        <el-pagination\r\n            @current-change=\"handleCurrentChange\"\r\n            @size-change=\"handleSizeChange\"\r\n            background\r\n            layout=\"total, sizes, prev, pager, next\"\r\n            :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"pageSize\" \r\n            :total=\"totalCount\">\r\n        </el-pagination>\r\n    </div>\r\n  </div>\r\n  \r\n  \r\n</template>\r\n\r\n<script>\r\nimport { switchList } from '@/api/activity';\r\nimport { serversPower } from '@/api/user';\r\nimport { changeSwitch } from '@/api/activity';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      totalCount: 0,\r\n      tableData: [],\r\n      server_selected: '',\r\n      servers: []\r\n    };\r\n  },\r\n  methods: {\r\n    changeServer(value) {\r\n      this.getSwitchList(1, value, this.currentPage, this.pageSize);\r\n      // location.reload()\r\n    },\r\n    getServersList(username) {\r\n      serversPower(username).then(response => {\r\n        this.servers = response.Data.servers;\r\n      });\r\n    },\r\n    formatter(row, column) {\r\n      return row.address;\r\n    },\r\n    handleSubmit(index, row) {\r\n      const change_time = new Date().getTime();\r\n      var data = {\r\n        game_id: 1,\r\n        server_id: this.server_selected,\r\n        change_time: change_time,\r\n        data: row\r\n      };\r\n\r\n      changeSwitch(data).then(response => {\r\n        if (response.Status === 200) {\r\n          this.$notify({\r\n            title: '操作成功',\r\n            message: '操作成功',\r\n            type: 'success'\r\n          });\r\n          this.$router.push({ path: '/account/list' });\r\n        } else {\r\n          console.log(response);\r\n        }\r\n      });\r\n    },\r\n    filterSendType(value, row) {\r\n      return row.type === value;\r\n    },\r\n    handleSizeChange(page_size) {\r\n      this.pageSize = page_size;\r\n      this.getSwitchList(1, this.server_selected, this.currentPage, this.pageSize);\r\n    },\r\n    handleCurrentChange(page) {\r\n      this.currentPage = page;\r\n      this.getSwitchList(1, this.server_selected, this.currentPage, this.pageSize);\r\n    },\r\n    getSwitchList(game_id, server_id, page, page_size) {\r\n      switchList(game_id, server_id, page - 1, page_size).then(response => {\r\n        console.log(response.Data);\r\n        this.tableData = response.Data.switchList;\r\n        this.tableData.forEach(element => {\r\n          if (parseInt(element['n_status']) === 1) {\r\n            element['n_status'] = true;\r\n          } else {\r\n            element['n_status'] = false;\r\n          }\r\n        });\r\n        this.totalCount = response.Data.count;\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.getServersList(this.$store.getters.name);\r\n  }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/activity/switch.vue","import request from '@/utils/request';\r\n\r\nexport function switchList(game_id, server_id, page, pageSize) {\r\n  return request({\r\n    url: '/api/activity/switchList',\r\n    method: 'get',\r\n    params: {\r\n      game_id,\r\n      server_id,\r\n      page,\r\n      pageSize\r\n    }\r\n  });\r\n}\r\nexport function changeSwitch(switchDetails) {\r\n  return request({\r\n    url: '/api/activity/changeSwitchStatus',\r\n    method: 'post',\r\n    data: { switchDetails }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/activity.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-select',{attrs:{\"placeholder\":\"选择服务器\"},on:{\"change\":_vm.changeServer},model:{value:(_vm.server_selected),callback:function ($$v) {_vm.server_selected=$$v},expression:\"server_selected\"}},_vm._l((_vm.servers),function(item){return _c('el-option',{key:item.server_id,attrs:{\"label\":item.server_name,\"value\":item.server_id}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.server_name))]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(item.server_ip))])])})),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.tableData,\"default-sort\":{prop: 'send_time', order: 'descending'}}},[_c('el-table-column',{attrs:{\"prop\":\"s_id\",\"label\":\"功能ID\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"s_name\",\"label\":\"功能名称\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"n_status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(scope.row.n_status),callback:function ($$v) {_vm.$set(scope.row, \"n_status\", $$v)},expression:\"scope.row.n_status\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit(scope.$index, scope.row)}}},[_vm._v(\"提交\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"margin-top\":\"20px\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, sizes, prev, pager, next\",\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"total\":_vm.totalCount},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e88bffb6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/activity/switch.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./switch.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./switch.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e88bffb6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./switch.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/activity/switch.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}