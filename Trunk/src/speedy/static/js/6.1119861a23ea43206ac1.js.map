{"version":3,"sources":["webpack:///src/views/settings/admins/admin_edit.vue","webpack:///./src/api/server.js","webpack:///./src/api/view.js","webpack:///./src/views/settings/admins/admin_edit.vue?3a4b","webpack:///./src/views/settings/admins/admin_edit.vue"],"names":["admin_edit","created","this","username","$route","query","getUserServer","getServerList","getUserView","getViewList","methods","handleServersChange","value","direction","movedKeys","_this","server_power_data","action","server_power","Object","user","then","response","console","log","Status","$notify","title","message","type","catch","err","handleViewsChange","_this2","view_power_data","view_power","_this3","request","url","method","serverList","Data","servers","_this4","viewList","views","_this5","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","serverPower","push","parseInt","server_id","return","_this6","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","viewPower","view_id","data","admins_admin_edit","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","text-align","display","attrs","filterable","titles","props","key","label","on","change","scopedSlots","_u","fn","ref","option","_s","server_name","model","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.1119861a23ea43206ac1.js","sourcesContent":["<template>\r\n    <div class=\"app-container\">\r\n        <p>服务器权限</p>\r\n        <hr></hr>\r\n        <div>\r\n            <el-transfer\r\n                style=\"text-align: left; display: inline-block\"\r\n                v-model=\"serverPower\"\r\n                filterable\r\n                :titles=\"['服务器列表', '可操作服务器']\"\r\n                @change=\"handleServersChange\"\r\n                :props=\"{\r\n                    key: 'server_id',\r\n                    label: 'server_name'\r\n                    }\"\r\n                :data=\"serverList\">\r\n                <span slot-scope=\"{ option }\">{{ option.server_id }} - {{ option.server_name }}</span>\r\n                <!-- <el-button class=\"transfer-footer\" slot=\"right-footer\" @click=\"onSubmit\">提交修改</el-button> -->\r\n\r\n            </el-transfer>\r\n        </div>\r\n        <p>页面权限</p>\r\n        <hr></hr>\r\n        <div>\r\n            <el-transfer\r\n                style=\"text-align: left; display: inline-block\"\r\n                v-model=\"viewPower\"\r\n                filterable\r\n                :titles=\"['页面列表', '可访问的页面']\"\r\n                @change=\"handleViewsChange\"\r\n                :props=\"{\r\n                    key: 'view_id',\r\n                    label: 'title'\r\n                    }\"\r\n                :data=\"viewList\">\r\n                <span slot-scope=\"{ option }\">{{ option.view_id }} - {{ option.title }}</span>\r\n                <!-- <el-button class=\"transfer-footer\" slot=\"right-footer\" @click=\"onSubmit\">提交修改</el-button> -->\r\n\r\n            </el-transfer>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n  serversPower,\r\n  viewsPower,\r\n  changeServerPower,\r\n  changeViewPower\r\n} from '@/api/user';\r\nimport { serverList } from '@/api/server';\r\nimport { viewList } from '@/api/view';\r\n\r\nexport default {\r\n  created() {\r\n    this.username = this.$route.query.username;\r\n    this.getUserServer(this.$route.query.username);\r\n    this.getServerList();\r\n    this.getUserView(this.$route.query.username);\r\n    this.getViewList();\r\n  },\r\n  methods: {\r\n    handleServersChange(value, direction, movedKeys) {\r\n      var server_power_data = { username: this.username };\r\n\r\n      if (direction === 'left') {\r\n        server_power_data.action = 'delete';\r\n        server_power_data.server_power = movedKeys;\r\n      }\r\n      if (direction === 'right') {\r\n        server_power_data.action = 'add';\r\n        server_power_data.server_power = movedKeys;\r\n      }\r\n      changeServerPower(server_power_data)\r\n        .then(response => {\r\n          console.log(response);\r\n\r\n          // 成功\r\n          if (response.Status === 200) {\r\n            this.$notify({\r\n              title: '操作成功',\r\n              message: '操作成功',\r\n              type: 'success'\r\n            });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    handleViewsChange(value, direction, movedKeys) {\r\n      var view_power_data = { username: this.username };\r\n\r\n      if (direction === 'left') {\r\n        view_power_data.action = 'delete';\r\n        view_power_data.view_power = movedKeys;\r\n      }\r\n      if (direction === 'right') {\r\n        view_power_data.action = 'add';\r\n        view_power_data.view_power = movedKeys;\r\n      }\r\n      console.log(view_power_data);\r\n\r\n      changeViewPower(view_power_data)\r\n        .then(response => {\r\n          console.log(response);\r\n\r\n          // 成功\r\n          if (response.Status === 200) {\r\n            this.$notify({\r\n              title: '操作成功',\r\n              message: '操作成功',\r\n              type: 'success'\r\n            });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getServerList() {\r\n      serverList()\r\n        .then(response => {\r\n          this.serverList = response.Data.servers;\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getViewList() {\r\n      viewList()\r\n        .then(response => {\r\n          this.viewList = response.Data.views;\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n\r\n    getUserServer(username) {\r\n      serversPower(username)\r\n        .then(response => {\r\n          for (const item of response.Data.servers) {\r\n            this.serverPower.push(parseInt(item.server_id));\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getUserView(username) {\r\n      viewsPower(username)\r\n        .then(response => {\r\n          for (const item of response.Data.views) {\r\n            this.viewPower.push(parseInt(item.view_id));\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      username: '',\r\n      serverPower: [],\r\n      serverList: [],\r\n      viewList: [],\r\n      viewPower: []\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.transfer-footer {\r\n  margin-left: 20px;\r\n  padding: 6px 5px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/settings/admins/admin_edit.vue","import request from '@/utils/request';\r\nexport function serverList() {\r\n  return request({\r\n    url: '/api/server/serverList',\r\n    method: 'get'\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/server.js","import request from '@/utils/request';\r\nexport function viewList() {\r\n  return request({\r\n    url: '/api/view/viewList',\r\n    method: 'get'\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/view.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('p',[_vm._v(\"服务器权限\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',[_c('el-transfer',{staticStyle:{\"text-align\":\"left\",\"display\":\"inline-block\"},attrs:{\"filterable\":\"\",\"titles\":['服务器列表', '可操作服务器'],\"props\":{\n                key: 'server_id',\n                label: 'server_name'\n                },\"data\":_vm.serverList},on:{\"change\":_vm.handleServersChange},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                var option = ref.option;\nreturn _c('span',{},[_vm._v(_vm._s(option.server_id)+\" - \"+_vm._s(option.server_name))])}}]),model:{value:(_vm.serverPower),callback:function ($$v) {_vm.serverPower=$$v},expression:\"serverPower\"}})],1),_vm._v(\" \"),_c('p',[_vm._v(\"页面权限\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',[_c('el-transfer',{staticStyle:{\"text-align\":\"left\",\"display\":\"inline-block\"},attrs:{\"filterable\":\"\",\"titles\":['页面列表', '可访问的页面'],\"props\":{\n                key: 'view_id',\n                label: 'title'\n                },\"data\":_vm.viewList},on:{\"change\":_vm.handleViewsChange},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                var option = ref.option;\nreturn _c('span',{},[_vm._v(_vm._s(option.view_id)+\" - \"+_vm._s(option.title))])}}]),model:{value:(_vm.viewPower),callback:function ($$v) {_vm.viewPower=$$v},expression:\"viewPower\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9adaf08e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/settings/admins/admin_edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9adaf08e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./admin_edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin_edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./admin_edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9adaf08e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./admin_edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/settings/admins/admin_edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}