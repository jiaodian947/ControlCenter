{"version":3,"sources":["webpack:///./src/api/mail.js","webpack:///src/views/mail/index.vue","webpack:///./src/views/mail/index.vue?46de","webpack:///./src/views/mail/index.vue"],"names":["page","pageSize","Object","__WEBPACK_IMPORTED_MODULE_0__utils_request__","url","method","params","id","maildetails","data","views_mail","currentPage","totalCount","tableData","methods","formatter","row","column","address","handleDelete","index","mail","then","response","Status","location","reload","filterSendType","value","send_type","handleSizeChange","page_size","this","getSendMailList","handleCurrentChange","_this","Data","mailList","forEach","element","utils","Date","count","created","selectortype_template_index_0_src_views_mail","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","width","attrs","stripe","default-sort","prop","order","label","sortable","_v","filters","text","filter-method","scopedSlots","_u","key","fn","scope","type","disable-transitions","_s","size","on","click","$event","$index","float","margin-top","background","layout","page-sizes","page-size","total","current-change","size-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/11.45e3e147e0655c5d3af1.js","sourcesContent":["import request from '@/utils/request';\r\n\r\nexport function sendMailList(page, pageSize) {\r\n  return request({\r\n    url: '/api/mail/sendMailList',\r\n    method: 'get',\r\n    params: {\r\n      page,\r\n      pageSize\r\n    }\r\n  });\r\n}\r\nexport function deleteMailLog(id) {\r\n  return request({\r\n    url: '/api/mail/deleteMailLog',\r\n    method: 'get',\r\n    params: {\r\n      id\r\n    }\r\n  });\r\n}\r\nexport function sendMail(maildetails) {\r\n  return request({\r\n    url: '/api/mail/sendMail',\r\n    method: 'post',\r\n    data: {\r\n      maildetails\r\n    }\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/mail.js","<template>\r\n  <div class=\"app-container\">\r\n    <el-table\r\n        stripe\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\"\r\n        :default-sort = \"{prop: 'send_time', order: 'descending'}\"\r\n        >\r\n        <el-table-column\r\n        prop=\"send_time\"\r\n        label=\"发送日期\"\r\n        sortable\r\n       >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"send_serverid\"\r\n        label=\"发送区服\"\r\n        sortable\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"send_type\"\r\n        label=\"发送类型\"\r\n        :filters=\"[{text:'全部发送',value:'全部发送'},{text:'指定发送',value:'指定发送'}]\"\r\n        :filter-method=\"filterSendType\"\r\n\r\n        >\r\n        <template slot-scope=\"scope\">\r\n          <el-tag\r\n            :type=\"scope.row.send_type === '全部发送' ? 'danger' : 'primary'\"\r\n            disable-transitions>{{scope.row.send_type}}\r\n          </el-tag>\r\n        </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"mail_type\"\r\n        label=\"邮件类型\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"to_roles\"\r\n        label=\"收件人\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"sender\"\r\n        label=\"发送人\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n        prop=\"send_reason\"\r\n        label=\"发送原因\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column \r\n         label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n    </el-table>\r\n    <div style=\"float:right;margin-top:20px;\">\r\n        <el-pagination\r\n            @current-change=\"handleCurrentChange\"\r\n            @size-change=\"handleSizeChange\"\r\n            background\r\n            layout=\"total, sizes, prev, pager, next\"\r\n            :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"pageSize\" \r\n            :total=\"totalCount\">\r\n        </el-pagination>\r\n    </div>\r\n  </div>\r\n  \r\n  \r\n</template>\r\n\r\n<script>\r\nimport { sendMailList } from '@/api/mail';\r\nimport { deleteMailLog } from '@/api/mail';\r\nimport { dateFtt } from '@/utils/index';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      totalCount: 0,\r\n      tableData: []\r\n    };\r\n  },\r\n  methods: {\r\n    formatter(row, column) {\r\n      return row.address;\r\n    },\r\n    handleDelete(index, row) {\r\n      deleteMailLog(row.id).then(response => {\r\n        if (response.Status === 200) {\r\n          location.reload();\r\n        }\r\n      });\r\n    },\r\n    filterSendType(value, row) {\r\n      return row.send_type === value;\r\n    },\r\n    handleSizeChange(page_size) {\r\n      this.pageSize = page_size;\r\n      this.getSendMailList(this.currentPage, this.pageSize);\r\n    },\r\n    handleCurrentChange(page) {\r\n      this.currentPage = page;\r\n      this.getSendMailList(this.currentPage, this.pageSize);\r\n    },\r\n    getSendMailList(page, page_size) {\r\n      sendMailList(page - 1, page_size).then(response => {\r\n        this.tableData = response.Data.mailList;\r\n        this.tableData.forEach(element => {\r\n          element['send_time'] = dateFtt(\r\n            'yyyy-MM-dd hh:mm:ss',\r\n            new Date(element['send_time'])\r\n          );\r\n          // 发送类型\r\n          if (element['send_type'] === 1) {\r\n            element['send_type'] = '全部发送';\r\n          } else {\r\n            element['send_type'] = '指定发送';\r\n          }\r\n        });\r\n        this.totalCount = response.Data.count;\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.getSendMailList(1, 10);\r\n  }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/mail/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.tableData,\"default-sort\":{prop: 'send_time', order: 'descending'}}},[_c('el-table-column',{attrs:{\"prop\":\"send_time\",\"label\":\"发送日期\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"send_serverid\",\"label\":\"发送区服\",\"sortable\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"send_type\",\"label\":\"发送类型\",\"filters\":[{text:'全部发送',value:'全部发送'},{text:'指定发送',value:'指定发送'}],\"filter-method\":_vm.filterSendType},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.send_type === '全部发送' ? 'danger' : 'primary',\"disable-transitions\":\"\"}},[_vm._v(_vm._s(scope.row.send_type)+\"\\n        \")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"mail_type\",\"label\":\"邮件类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"to_roles\",\"label\":\"收件人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sender\",\"label\":\"发送人\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"send_reason\",\"label\":\"发送原因\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"margin-top\":\"20px\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, sizes, prev, pager, next\",\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pageSize,\"total\":_vm.totalCount},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-502a7037\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/mail/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-502a7037\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/mail/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}