webpackJsonp([10],{OUBP:function(e,t,a){"use strict";t.a=function(e){return Object(l.a)({url:"/api/player/playerInfo",method:"post",data:{player_info:e}})};var l=a("vLgD")},iyGm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vMJZ"),r=a("OUBP"),i={watch:{filterText:function(e,t){console.log(e),this.tableData=this.tableData.filter(function(t){return~t.Key.indexOf(e)})}},methods:{mapRecordsData:function(e,t){if(null!==t)for(var a=0;a<t.length;a++){var l=t[a];e.push({id:a,type:1,label:l.RecName,data:{Rows:l.Rows,Cols:l.Columns},children:[]})}},mapChildData:function(e,t){if(null!==t)for(var a=0;a<t.length;a++){var l=t[a];e.push({label:l.Script,children:[{id:a,type:0,data:l.Attrs.Attr,label:"属性"},{id:a,label:"表格",children:[]},{id:a,type:2,label:"子对象",children:[]}]}),this.mapChildData(e[a].children[2].children,l.Childs),this.mapRecordsData(e[a].children[1].children,l.Records.Records)}},queryPlayerInfo:function(){var e=this,t={game_id:1,server_id:this.server_selected,role_name:this.roleName};this.loading=!0,Object(r.a)(t).then(function(t){e.mapChildData(e.Childs_dom,t.Data.Childs),e.mapRecordsData(e.Records_dom,t.Data.Records.Records);var a=[];a.push({id:0,type:0,data:t.Data.Attrs.Attr,label:"属性"},{id:1,label:"表格",children:e.Records_dom},{id:2,type:2,label:"子对象",children:e.Childs_dom}),e.data2=a,console.log(e.data2),e.loading=!1})},getServersList:function(e){var t=this;Object(l.d)(e).then(function(e){t.servers=e.Data.servers})},handleNodeClick:function(e){if(this.tableData=[],this.cols=[],0===e.type&&(this.tableData=e.data,this.cols.push({prop:"Key",label:"属性"},{prop:"Val",label:"值"}),console.log(this.cols)),1===e.type){for(var t=e.data.Cols.ColType,a=e.data.Rows,l=[],r=0;r<t.length;r++){var i="Key"+r.toString();l[i]=[],this.cols.push({prop:i,label:t[r].toString()})}for(var s=0;s<a.length;s++){for(var o=a[s].Values,n={},d=0;d<t.length;d++){n["Key"+d.toString()]=o[d].Val}l.push(n)}this.tableData=l}this.filter_data=this.tableData}},created:function(){this.getServersList(this.$store.getters.name)},data:function(){return{loading:!1,server_selected:"",servers:[],tableData:[],cols:[],data2:[],filterText:"",roleName:"",defaultProps:{children:"children",label:"label"},Childs_dom:[],Attrs_dom:[],Records_dom:[]}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{direction:"horizontal","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-container",{staticStyle:{height:"700px",width:"30%"},attrs:{direction:"vertical"}},[a("el-header",{staticStyle:{height:"100px"}},[a("el-row",[a("el-select",{attrs:{placeholder:"请选择玩家所在的区服"},model:{value:e.server_selected,callback:function(t){e.server_selected=t},expression:"server_selected"}},e._l(e.servers,function(t){return a("el-option",{key:t.server_ip,attrs:{label:t.server_name,value:t.server_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.server_name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.server_ip))])])}))],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:10,type:"flex"}},[a("el-col",{staticStyle:{width:"70%"}},[a("el-input",{attrs:{placeholder:"输入要查询的玩家名字"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}})],1),e._v(" "),a("el-col",{staticStyle:{width:"30%"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.queryPlayerInfo}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-aside",[a("el-tree",{staticClass:"filter-tree",staticStyle:{height:"580px"},attrs:{data:e.data2,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),a("el-container",{staticStyle:{height:"700px",width:"70%"},attrs:{direction:"vertical"}},[a("el-header",[a("el-input",{staticStyle:{"margin-bottom":"30px",width:"300px"},attrs:{placeholder:"Filter keyword"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",height:"600px"}},e._l(e.cols,function(e){return a("el-table-column",{key:e.label,attrs:{prop:e.prop,label:e.label}})}))],1)],1)],1)],1)},staticRenderFns:[]},o=a("VU/8")(i,s,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=10.aea070f21551094d338e.js.map